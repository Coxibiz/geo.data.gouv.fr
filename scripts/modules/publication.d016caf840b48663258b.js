webpackJsonp([2],{213:function(e,t,n){"use strict";function r(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.a=r},214:function(e,t,n){"use strict";function r(e){return function(t,n,r){var a=Object(t);if(!Object(c.a)(t)){var o=Object(l.a)(n,3);t=Object(s.a)(t),n=function(e){return o(a[e],e,a)}}var i=e(t,n,r);return i>-1?a[o?t[i]:i]:void 0}}function a(e){if("number"==typeof e)return e;if(Object(m.a)(e))return h;if(Object(p.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(p.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(b,"");var n=v.test(e);return n||y.test(e)?E(e.slice(2),n?2:8):g.test(e)?h:+e}function o(e){if(!e)return 0===e?e:0;if((e=O(e))===j||e===-j){return(e<0?-1:1)*P}return e===e?e:0}function i(e){var t=_(e),n=t%1;return t===t?n?t-n:t:0}function u(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var a=null==n?0:w(n);return a<0&&(a=z(r+a,0)),Object(d.a)(e,Object(l.a)(t,3),a)}var l=n(47),c=n(18),s=n(27),f=r,d=n(205),p=n(17),m=n(19),h=NaN,b=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,y=/^0o[0-7]+$/i,E=parseInt,O=a,j=1/0,P=1.7976931348623157e308,_=o,w=i,z=Math.max,k=u,C=f(k);t.a=C},349:function(e,t){e.exports={section:"User-2CxyhPJC",img:"User-2e2AtJT1",detail:"User-31zN56Lh"}},350:function(e,t){e.exports={publishing:"Layout-1E5hwZmN",organizationLogo:"Layout-2D3gKnp2",container:"Layout-1RiVBjUz"}},351:function(e,t){e.exports={container:"OrganizationPreview-2dAg6lEZ",organization:"OrganizationPreview-1414_TnG",img:"OrganizationPreview-3NmJwddX",detail:"OrganizationPreview-2jGdLKDs"}},352:function(e,t){e.exports={container:"Organizations-1ux6MTEE"}},353:function(e,t){e.exports={container:"Errors-1no9c7gb"}},354:function(e,t){e.exports={link:"OrganizationProducersPreview-lCQSPUCQ"}},355:function(e,t){e.exports={link:"OrganizationMetrics-mzlVD2BG"}},356:function(e,t){e.exports={container:"AddCatalogs-1mRJyIvK",card:"AddCatalogs-IcmgAWBx",loader:"AddCatalogs-2ef2C22Q",add:"AddCatalogs-2oEDFc9e",warningMsg:"AddCatalogs-Em02HEwg"}},357:function(e,t){e.exports={catalogsStyle:"SourceCatalogs-2-nuwxNW",catalog:"SourceCatalogs-1kKEsoZj",remove:"SourceCatalogs-B7QGfh_a",buttonStyle:"SourceCatalogs-2oNwxHWX"}},358:function(e,t){e.exports={content:"ManageOrganization-_u5wJFtp",previousPage:"ManageOrganization-2BYb5Z-8",organization:"ManageOrganization-3CIecK05"}},359:function(e,t){e.exports={msg:"ActivateOrganization-2nN0bVaj",activate:"ActivateOrganization-2kQTdbXR"}},360:function(e,t){e.exports={data:"DatasetToSelect-3CVv5iJF",progress:"DatasetToSelect-2i3CqS6J"}},361:function(e,t){e.exports={buttons:"DatasetsToBePublished-30i-IQDq",publishButton:"DatasetsToBePublished-4415I3f0",refresh:"DatasetsToBePublished-2ebaoAKc",disable:"DatasetsToBePublished-3X4sq9v0",selection:"DatasetsToBePublished-1djrlBM0",noData:"DatasetsToBePublished-3WtPqvmi"}},362:function(e,t){e.exports={data:"PublishedDatasets-1-bvX8CV"}},363:function(e,t){e.exports={container:"DatasetsPublication-3xUpydwy",header:"DatasetsPublication-2qM-CHxJ",success:"DatasetsPublication-2AjUtl2g",warning:"DatasetsPublication-3BMy1JSB",error:"DatasetsPublication-3zWtdgui"}},364:function(e,t){e.exports={previousPage:"OrganizationDatasets-3DstENWW"}},365:function(e,t){e.exports={container:"RelatedProducers-1ojfGJFE",header:"RelatedProducers-1dmoW5Ri",producers:"RelatedProducers-2HujMnzq",dissociate:"RelatedProducers-2yyH4-2r"}},366:function(e,t){e.exports={container:"UnrelatedProducers-2kLUVfXb",header:"UnrelatedProducers-CEwa0iv1",subtitle:"UnrelatedProducers-1FOvu-KQ",producers:"UnrelatedProducers-xRyuKU15",associate:"UnrelatedProducers-1SnRig_z"}},367:function(e,t){e.exports={item:"OtherProducersItem-2ei8gnOq"}},368:function(e,t){e.exports={container:"OtherProducers-2mmbO7qE",header:"OtherProducers-jHD9CLpM",subtitle:"OtherProducers-prw_WmIY",producers:"OtherProducers-2e7YAkOU",organization:"OtherProducers-2YfmcbId"}},369:function(e,t){e.exports={previousPage:"Producers-V1J01CdD"}},376:function(e,t,n){"use strict";function r(e){var t=e.user,n=e.organization,r=e.pageTitle,a=e.title,o=e.children;if(!t)return null;var i=n&&n.logo?n.logo:"/assets/no-img.png";return te.default.createElement("div",{className:ce.a.publishing},te.default.createElement(re.Helmet,{title:r}),te.default.createElement(ue,{user:t}),n?te.default.createElement(ne.Link,{to:"/publication/"+n.id},te.default.createElement("img",{className:ce.a.organizationLogo,alt:"organization logo",src:i})):null,te.default.createElement("div",{className:ce.a.container},te.default.createElement("h3",null,a),o))}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t,n,r){for(var a=n-1,o=e.length;++a<o;)if(r(e[a],t))return a;return-1}function l(e,t,n,r){var a=r?De:Ae.a,o=-1,i=t.length,u=e;for(e===t&&(t=Object(Ue.a)(t)),n&&(u=Object(Se.a)(e,Object(Re.a)(n)));++o<i;)for(var l=0,c=t[o],s=n?n(c):c;(l=a(u,s,l,r))>-1;)u!==e&&Be.call(u,l,1),Be.call(e,l,1);return e}function c(e,t){return e&&e.length&&t&&t.length?We(e,t):e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e){var t=e.organizationDetails,n=e.organization,r=e.user,a=e.metrics;return r?t?n&&a?te.default.createElement(se,{user:r,organization:t,pageTitle:t.name,title:t.name},te.default.createElement(ct,e)):te.default.createElement(se,{user:r,organization:t,pageTitle:t.name,title:t.name},te.default.createElement(pt,{organizationId:t.id,onActivation:function(){return e.onActivation()}})):te.default.createElement(Ee,{errors:["Cette organisation n'existe pas sur data.gouv.fr"]}):te.default.createElement(Ee,{errors:["Vous devez être authentifié pour accéder à cette page"]})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){return function(n){function r(e){_(this,r);var t=w(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={errors:[]},t}return z(r,n),mt(r,[{key:"componentDidMount",value:function(){var e=this,n=Promise.all(Object.keys(t).map(function(n){return Object(je.c)(t[n],e,n)}));return n.then(function(){return e.setState({dependenciesReady:!0})}),n}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"render",value:function(){var t=this.state,n=t.errors,r=t.dependenciesReady;return n.length?te.default.createElement(Ee,{errors:n}):r?te.default.createElement(e,Object.assign({},this.state,this.props)):te.default.createElement(qe.a,{isLoading:!0})}}]),r}(te.Component)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Y(e,t){return e.filter(function(e){return e.associatedTo&&e.associatedTo===t})}function H(e){return e.filter(function(e){return!e.associatedTo})}function K(e,t){return e.filter(function(e){return e.associatedTo&&e.associatedTo!==t})}function Q(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function G(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var te=n(0),ne=n(8),re=n(26),ae=(n(1),n(349)),oe=n.n(ae),ie=function(e){var t=e.user,n=t.avatar?{url:t.avatar,alt:t.slug}:{url:"assets/avatar.png",alt:"no avatar"};return te.default.createElement("div",{className:oe.a.section},te.default.createElement(ne.Link,{className:oe.a.detail,to:"/publication"},te.default.createElement("img",{className:oe.a.img,src:n.url,alt:n.alt}),te.default.createElement("div",null,t.first_name," ",t.last_name)))},ue=ie,le=n(350),ce=n.n(le),se=r,fe=n(351),de=n.n(fe),pe=function(e){var t=e.organization,n=t&&t.logo?t.logo:"/assets/no-img.png";return te.default.createElement("div",{className:de.a.container},te.default.createElement(ne.Link,{className:de.a.organization,to:"/publication/"+t.id},te.default.createElement("img",{className:de.a.img,src:n,alt:t.slug}),te.default.createElement("div",{className:de.a.detail},t.name)))},me=pe,he=n(352),be=function(e){var t=e.organizations;return te.default.createElement("div",{className:he.container},te.default.createElement(re.Helmet,{title:"Vos organisations"}),t.map(function(e,t){return te.default.createElement(me,{key:t,organization:e})}))},ge=be,ve=n(353),ye=function(e){var t=e.errors,n=t.length>1?te.default.createElement("h3",null,"Des erreurs sont survenues"):te.default.createElement("h3",null,"Une erreur est survenue");return te.default.createElement("div",{className:ve.container},te.default.createElement(re.Helmet,{title:"Erreur"}),n,te.default.createElement("ul",null,t.map(function(e,t){return te.default.createElement("li",{key:t},e)})))},Ee=ye,Oe=n(43),je=n(44),Pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_e=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={user:null,errors:[]},n}return i(t,e),Pe(t,[{key:"componentWillMount",value:function(){var e=this;return Object(je.c)(Object(Oe.p)(),this,"user").then(function(){if(!e.state.user){var t=encodeURI("https://inspire.data.gouv.fr/publication"),n="https://inspire.data.gouv.fr/dgv/login?redirect="+t;document.location.replace(n)}})}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.errors;return n.length?te.default.createElement(Ee,{errors:n}):t?te.default.createElement(se,{user:t,pageTitle:"Vos organisations",title:"Vos organisations"},te.default.createElement(ge,{organizations:t.organizations})):te.default.createElement(Ee,{errors:["Vous devez être authentifié pour accéder à cette page"]})}}]),t}(te.Component),we=_e,ze=n(354),ke=function(e){var t=e.organizationId,n=e.producers;return te.default.createElement("div",null,te.default.createElement("div",null,te.default.createElement("strong",null,n.length)," producteurs sont associés à votre organisation"),te.default.createElement("ul",null,n.map(function(e,t){return te.default.createElement("li",{key:t},e._id)})),te.default.createElement(ne.Link,{className:ze.link,to:"/publication/"+t+"/producers"},"Associer des producteurs"))},Ce=ke,Ne=n(355),Te=function(e){var t=e.organizationId,n=e.metrics,r=n.published,a=n.notPublishedYet,o=n.publishedByOthers;return te.default.createElement("div",null,te.default.createElement("p",null,te.default.createElement("strong",null,r)," jeux de données sont ",te.default.createElement("strong",null,"publiés et accessibles")," sur ",te.default.createElement("a",{href:"https://data.gouv.fr"},"data.gouv.fr")),te.default.createElement("p",null,te.default.createElement("strong",null,a)," jeux de données sont ",te.default.createElement("strong",null,"en attente de publication")),te.default.createElement("p",null,te.default.createElement("strong",null,o)," jeux de données sont ",te.default.createElement("strong",null,"publiés par d'autres producteurs")),te.default.createElement(ne.Link,{className:Ne.link,to:"/publication/"+t+"/datasets"},"Publier des données"))},xe=Te,Ie=n(100),Se=n(52),Ae=n(215),De=u,Re=n(58),Ue=n(213),Le=Array.prototype,Be=Le.splice,We=l,Me=c,Je=Object(Ie.a)(Me),Ve=Je,qe=n(13),Ye=n(212),He=n(94),Ke=n(96),Qe=n(356),Fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xe=function(e){function t(e){s(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errors:[]},n}return d(t,e),Fe(t,[{key:"componentWillMount",value:function(){return Object(je.c)(Object(Oe.f)(),this,"catalogs")}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"render",value:function(){var e=this.state.catalogs,t=this.props,n=t.sourceCatalogs,r=t.addCatalog;if(!this.state.catalogs)return te.default.createElement(qe.a,{isLoading:!0,className:Qe.loader});var a=Object(Ke.a)(e,n),o=Object(Ke.b)(a);return te.default.createElement("div",{className:Qe.container},o.map(function(e,t){return te.default.createElement("div",{key:t,className:Qe.card},te.default.createElement(He.a,{catalog:e}),te.default.createElement(Ye.a,{style:Qe.add,action:function(){return r(e.id)},text:"Ajouter"}))}),te.default.createElement("div",{className:Qe.warningMsg},te.default.createElement("i",{className:"warning icon"}),"Seuls les catalogues disposant de données ouvertes et téléchargeables sont disponible ici."))}}]),t}(te.Component),Ge=Xe,Ze=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),$e=function(e){function t(e){p(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={catalog:null,errors:[]},n}return h(t,e),Ze(t,[{key:"componentWillMount",value:function(){return Object(je.c)(Object(Oe.e)(this.props.catalogId),this,"catalog")}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"render",value:function(){var e=this.state.catalog;return e?te.default.createElement(He.a,{catalog:e}):null}}]),t}(te.Component),et=$e,tt=n(217),nt=n(357),rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),at=function(e){function t(e){g(this,t);var n=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={catalogs:[].concat(b(n.props.sourceCatalogs)),displayCatalogs:!1,errors:[]},n}return y(t,e),rt(t,[{key:"toggleCatalogList",value:function(){this.setState({displayCatalogs:!this.state.displayCatalogs})}},{key:"addCatalog",value:function(e){var t=this,n=this.state.catalogs,r=this.props.organizationId;if(!n.includes(e)){var a=[].concat(b(n),[e]);Object(Oe.r)(r,{sourceCatalogs:a}).then(function(){return t.setState({catalogs:a})})}}},{key:"removeCatalog",value:function(e){var t=this,n=this.state.catalogs,r=this.props.organizationId;if(n.includes(e)){var a=Ve(n,e);Object(Oe.r)(r,{sourceCatalogs:a}).then(function(){return t.setState({catalogs:a})})}}},{key:"render",value:function(){var e=this,t=this.state,n=t.displayCatalogs,r=t.catalogs,a=t.errors;if(a.length)return te.default.createElement(Ee,{errors:a});var o=te.default.createElement(Ye.a,{action:function(){return e.toggleCatalogList()},text:"Ajouter des catalogues"}),i=te.default.createElement(Ge,{sourceCatalogs:r,addCatalog:function(t){return e.addCatalog(t)}});return te.default.createElement("div",null,te.default.createElement("div",{className:nt.catalogsStyle},r.map(function(t){return te.default.createElement("div",{key:t,className:nt.catalog},te.default.createElement(et,{catalogId:t,size:"small"}),te.default.createElement(tt.a,{style:nt.remove,action:function(){return e.removeCatalog(t)},text:"Supprimer"}))})),te.default.createElement("div",{className:nt.buttonStyle},n?i:o))}}]),t}(te.Component),ot=at,it=n(358),ut=n.n(it),lt=function(e){var t=e.organization,n=e.metrics;return te.default.createElement("div",{className:ut.a.content},te.default.createElement("div",{className:ut.a.section},te.default.createElement("h4",null,"Catalogues source"),te.default.createElement(ot,{organizationId:t._id,sourceCatalogs:t.sourceCatalogs})),te.default.createElement("div",{className:ut.a.section},te.default.createElement("h4",null,"Producteurs source"),te.default.createElement(Ce,{organizationId:t._id,producers:t.producers})),te.default.createElement("div",{className:ut.a.section},te.default.createElement("h4",null,"Jeux de données"),te.default.createElement(xe,{metrics:n,organizationId:t._id})),te.default.createElement("div",{className:ut.a.previousPage},te.default.createElement(ne.Link,{to:"/publication"},te.default.createElement("i",{className:"arrow left icon"})," Retour aux organisations")))},ct=lt,st=n(359),ft=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dt=function(e){function t(e){E(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errors:[],activating:!1},n}return j(t,e),ft(t,[{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"activateAccount",value:function(){var e=this;return this.setState({activating:!0}),Object(je.b)(Object(Oe.r)(this.props.organizationId),this).promise.then(function(){e.setState({activating:!1}),e.props.onActivation()}).catch(function(t){t.isCanceled||e.setState({activating:!1,errors:["Impossible d'activer l'outil sur votre organisation"]})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.errors,r=t.activating;return n.length?te.default.createElement(Ee,{errors:n}):te.default.createElement("div",{className:st.msg},te.default.createElement("h3",null,"L'outil de publication n'est pas encore activé."),te.default.createElement("button",{className:st.activate,onClick:function(){return e.activateAccount()},disabled:r},"Activer l'outil"))}}]),t}(te.Component),pt=dt,mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ht=n(103),bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),gt=function(e){function t(e){C(this,t);var n=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dependencies:n.getDependencies()},n}return T(t,e),bt(t,[{key:"getDependencies",value:function(){var e=this.props.match.params.organizationId;return{user:Object(Oe.p)(),metrics:Object(ht.a)(Object(Oe.g)(e)),organization:Object(ht.a)(Object(Oe.l)(e)),organizationDetails:Object(ht.a)(Object(Oe.m)(e))}}},{key:"update",value:function(){this.setState({dependencies:this.getDependencies()})}},{key:"render",value:function(){var e=this,t=k(P,this.state.dependencies);return te.default.createElement(t,{onActivation:function(){return e.update()}})}}]),t}(te.Component),vt=gt,yt=n(55),Et=n.n(yt),Ot=n(360),jt=function(e){var t=e.dataset,n=e.isSelected,r=e.inProgress,a=e.change;return te.default.createElement("div",{className:Ot.data},te.default.createElement(ne.Link,{to:"/datasets/"+t._id},t.title),r?te.default.createElement("div",{className:Ot.progress},"Publication en cours..."):te.default.createElement("input",{type:"checkbox",checked:n,onChange:function(){return a(t)}}))},Pt=jt,_t=n(361),wt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),zt=function(e){function t(e){I(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={toPublish:[],publicationsInProgress:[]},n}return A(t,e),wt(t,[{key:"publishDatasets",value:function(){var e=this.state.toPublish,t=this.props.organizationId;e.length&&(this.setState({publicationsInProgress:[].concat(x(e))}),e.map(function(e){return Object(Oe.q)(e._id,t)}))}},{key:"addDatasetToPublish",value:function(e){var t=this.state.toPublish;t.includes(e)||(t.push(e),this.setState({toPublish:t}))}},{key:"removeDatasetToPublish",value:function(e){this.setState({toPublish:this.state.toPublish.filter(function(t){return t._id!==e._id})})}},{key:"selection",value:function(){var e=this.props.datasets;this.state.toPublish.length===e.length?this.setState({toPublish:[]}):this.setState({toPublish:[].concat(x(e))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.datasets,r=t.update,a=this.state,o=a.toPublish,i=a.publicationsInProgress,u=o.length===n.length?"Tout désélectionner":"Tout sélectionner",l=o.length===n.length?"Publier toutes les données":"Publier les données sélectionnées",c=o.length?_t.publishButton:_t.disable;return n.length?te.default.createElement("div",null,n.map(function(t,n){var r=!0===o.includes(t);return te.default.createElement(Pt,{key:n,dataset:t,isSelected:r,inProgress:!0===i.includes(t),change:r?function(t){return e.removeDatasetToPublish(t)}:function(t){return e.addDatasetToPublish(t)}})}),i.length?te.default.createElement("button",{className:_t.refresh,onClick:function(){return r()}},"Actualiser les données ",te.default.createElement("i",{className:"refresh icon"})):null,te.default.createElement("div",{className:_t.buttons},te.default.createElement("div",{className:_t.button+" "+_t.selection,onClick:function(){return e.selection()}},u),te.default.createElement("div",{className:_t.button+" "+c,onClick:function(){return e.publishDatasets()}},l))):te.default.createElement("div",{className:_t.noData},"Aucun jeu de données.")}}]),t}(te.Component),kt=zt,Ct=n(362),Nt=function(e){var t=e.datasets;return t.length?te.default.createElement("div",null,t.map(function(e,t){return te.default.createElement("div",{key:t,className:Ct.data},te.default.createElement(ne.Link,{to:"/datasets/"+e._id},e.title),te.default.createElement("a",{href:e.remoteUrl,target:"blank"},"Fiche data.gouv.fr"))})):te.default.createElement("div",{className:Ct.data},"Aucun jeu de données.")},Tt=Nt,xt=n(363),It=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),St=function(e){function t(){return R(this,t),U(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,e),It(t,[{key:"render",value:function(){var e,t=this.props,n=t.datasets,r=t.title,a=t.update,o=t.organizationId,i=t.status,u=n.sort(function(e,t){return e.title.localeCompare(t.title)}),l=Et()(xt.header,(e={},D(e,xt.success,"success"===i),D(e,xt.warning,"warning"===i),D(e,xt.error,"error"===i),e));return te.default.createElement("div",{className:xt.container},te.default.createElement("div",{className:l},te.default.createElement("div",null,r),te.default.createElement("div",null,n.length)),"error"===i?te.default.createElement(kt,{datasets:u,update:function(){return a()},organizationId:o}):te.default.createElement(Tt,{datasets:u}))}}]),t}(te.Component),At=St,Dt=n(364),Rt=function(e){var t=e.published,n=e.notPublishedYet,r=e.publishedByOthers,a=e.update,o=e.organizationId;return te.default.createElement("div",null,te.default.createElement(At,{datasets:n,organizationId:o,title:"Données en attente de publication",status:"error",update:function(){return a()}}),te.default.createElement(At,{datasets:t,organizationId:o,title:"Données publiées",status:"success"}),te.default.createElement(At,{datasets:r,organizationId:o,title:"Données publiées par une autre organisation",status:"warning"}),te.default.createElement("div",{className:Dt.previousPage},te.default.createElement(ne.Link,{to:"/publication/"+o},te.default.createElement("i",{className:"arrow left icon"})," retour")))},Ut=Rt,Lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bt=function(e){function t(e){B(this,t);var n=W(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.match.params.organizationId;return n.state={errors:[],organizationId:r},n}return M(t,e),Lt(t,[{key:"componentWillMount",value:function(){return Promise.all([this.updateUser(),this.updatePublished(),this.updatePublishedByOthers(),this.updateNotPublishedYet()])}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"updateUser",value:function(){return Object(je.c)(Object(Oe.p)(),this,"user")}},{key:"updatePublished",value:function(){return Object(je.c)(Object(Oe.i)(this.state.organizationId),this,"published")}},{key:"updateNotPublishedYet",value:function(){return Object(je.c)(Object(Oe.h)(this.state.organizationId),this,"notPublishedYet")}},{key:"updatePublishedByOthers",value:function(){return Object(je.c)(Object(Oe.j)(this.state.organizationId),this,"publishedByOthers")}},{key:"updateDatasets",value:function(){return Promise.all([this.updatePublished(),this.updateNotPublishedYet()])}},{key:"render",value:function(){var e=this,t=this.state,n=t.organizationId,r=t.user,a=t.published,o=t.notPublishedYet,i=t.publishedByOthers,u=t.errors,l={published:a,notPublishedYet:o,publishedByOthers:i};if(u.length)return te.default.createElement(Ee,{errors:u});if(!r)return te.default.createElement(Ee,{errors:["Vous devez être authentifié pour accéder à cette page"]});var c=r.organizations.find(function(e){return e.id===n});return c&&l.published&&l.notPublishedYet&&l.publishedByOthers?te.default.createElement(se,{user:r,organization:c,pageTitle:c.name,title:"Jeux de données"},te.default.createElement(Ut,Object.assign({},l,{update:function(){return e.updateDatasets()},organizationId:n}))):null}}]),t}(te.Component),Wt=Bt,Mt=n(365),Jt=n.n(Mt),Vt=function(e){var t=e.producers,n=e.action;return te.default.createElement("div",{className:Jt.a.container},te.default.createElement("div",{className:Jt.a.header},te.default.createElement("div",null,"Producteurs rattachés à votre organisation"),te.default.createElement("div",null,t.length)),te.default.createElement("div",{className:Jt.a.list},t.map(function(e,t){return te.default.createElement("div",{className:Jt.a.producers,key:t},te.default.createElement("div",null,e._id),te.default.createElement("button",{className:Jt.a.dissociate,onClick:function(){return n(e)}},"Dissocier"))})))},qt=Vt,Yt=n(366),Ht=n.n(Yt),Kt=function(e){var t=e.producers,n=e.action;return te.default.createElement("div",{className:Ht.a.container},te.default.createElement("div",{className:Ht.a.header},te.default.createElement("div",null,te.default.createElement("div",null,"Producteurs non rattachés"),te.default.createElement("div",{className:Ht.a.subtitle},"Ajoutez les producteurs dont vous souhaitez que les données ouvertes soient publiées dans votre organisation.")),te.default.createElement("div",null,t.length)),te.default.createElement("div",{className:Ht.a.list},t.map(function(e,t){return te.default.createElement("div",{className:Ht.a.producers,key:t},te.default.createElement("div",null,e._id),te.default.createElement("button",{className:Ht.a.associate,onClick:function(){return n(e)}},"Associer"))})))},Qt=Kt,Ft=n(214),Xt=n(367),Gt=n.n(Xt),Zt=function(e){var t=e.organizations,n=e.producer,r=Object(Ft.a)(t,function(e){return e._id===n.associatedTo});return te.default.createElement("div",{className:Gt.a.item},"Rattaché à ",te.default.createElement("a",{href:"https://www.data.gouv.fr/fr/organizations/"+r._id+"/"},r.name))},$t=Zt,en=n(368),tn=n.n(en),nn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),rn=function(e){function t(e){J(this,t);var n=V(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errors:[],organizationProducers:[]},n}return q(t,e),nn(t,[{key:"componentDidMount",value:function(){var e=this.props.producers,t=e.map(function(e){return e.associatedTo});return Object(je.c)(Object(Oe.o)(t),this,"organizations")}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"render",value:function(){var e=this.state.organizations,t=this.props.producers;return e?te.default.createElement("div",{className:tn.a.container},te.default.createElement("div",{className:tn.a.header},te.default.createElement("div",null,te.default.createElement("div",null,"Producteurs rattachés à d'autres organisations"),te.default.createElement("div",{className:tn.a.subtitle},te.default.createElement("div",null,"Les producteurs de cette liste ne peuvent pas être rattachés à votre compte organisation parce qu'ils sont déjà rattachés à un autre compte. N\\'hésitez pas à contacter l'organisation de rattachement si vous estimez que votre propre compte est plus pertinent."),te.default.createElement("p",null,"En cas de difficulté, contactez ",te.default.createElement("a",{href:"mailto:inspire@data.gouv.fr"},"notre équipe"),"."))),te.default.createElement("div",null,t.length)),te.default.createElement("div",{className:tn.a.list},t.map(function(t,n){return te.default.createElement("div",{className:tn.a.producers,key:n},te.default.createElement("div",null,t._id),te.default.createElement($t,{organizations:e,producer:t}))}))):null}}]),t}(te.default.Component),an=rn,on=n(369),un=n.n(on),ln=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cn=function(e){function t(e){F(this,t);var n=X(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errors:[],organizationProducers:[]},n}return G(t,e),ln(t,[{key:"componentDidMount",value:function(){return Promise.all([this.updateProducersToAssociate()])}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"updateProducersToAssociate",value:function(){var e=this.props.organization;return Object(je.c)(Object(Oe.n)(e._id),this,"organizationProducers")}},{key:"dissociate",value:function(e){var t=this,n=this.state.organizationProducers,r=this.props.organization;this.setState({organizationProducers:Ve([].concat(Q(n)),e)}),Object(Oe.d)(e._id,r._id).then(function(){return t.updateProducersToAssociate()})}},{key:"associate",value:function(e){var t=this,n=this.state.organizationProducers,r=this.props.organization;this.setState({organizationProducers:Ve([].concat(Q(n)),e)}),Object(Oe.a)(e._id,r._id).then(function(){return t.updateProducersToAssociate()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.organizationProducers,r=t.errors,a=this.props.organization,o=Y(n,a._id),i=H(n),u=K(n,a._id);return r.length?te.default.createElement(Ee,{errors:r}):n.length?te.default.createElement("div",null,te.default.createElement(qt,{producers:o,action:function(t){return e.dissociate(t)}}),te.default.createElement(Qt,{producers:i,action:function(t){return e.associate(t)}}),te.default.createElement(an,{producers:u}),te.default.createElement("div",{className:un.a.previousPage},te.default.createElement(ne.Link,{to:"/publication/"+a._id},te.default.createElement("i",{className:"arrow left icon"})," Retour"))):null}}]),t}(te.default.Component),sn=cn,fn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dn=function(e){function t(e){Z(this,t);var n=$(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.match.params.organizationId;return n.state={errors:[],organizationId:r},n}return ee(t,e),fn(t,[{key:"componentWillMount",value:function(){return Promise.all([this.updateUser(),this.updateOrganization()])}},{key:"componentWillUnmount",value:function(){return Object(je.a)(this)}},{key:"updateUser",value:function(){return Object(je.c)(Object(Oe.p)(),this,"user")}},{key:"updateOrganization",value:function(){return Object(je.c)(Object(Oe.l)(this.props.params.organizationId),this,"organization")}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.organization,r=e.errors,a=e.organizationId;if(r.length)return te.default.createElement(Ee,{errors:r});if(!t)return te.default.createElement(Ee,{errors:["Vous devez être authentifié pour accéder à cette page"]});if(!n)return null;var o=t.organizations.find(function(e){return e.id===a});return te.default.createElement(se,{user:t,organization:o,pageTitle:n.name+" - Producteurs",title:"Producteurs"},te.default.createElement(sn,{organization:n}))}}]),t}(te.Component),pn=dn,mn=function(){return te.default.createElement(ne.Switch,null,te.default.createElement(ne.Route,{exact:!0,path:"/publication",component:we}),te.default.createElement(ne.Route,{path:"/publication/:organizationId/datasets",component:Wt}),te.default.createElement(ne.Route,{path:"/publication/:organizationId/producers",component:pn}),te.default.createElement(ne.Route,{path:"/publication/:organizationId",component:vt}))};t.default=mn}});
//# sourceMappingURL=publication.d016caf840b48663258b.js.map