webpackJsonp([3],{304:function(e,t){e.exports={container:"CatalogsListPage-3DNuuYau",catalogs:"CatalogsListPage-2MAO9T-Q",catalog:"CatalogsListPage-3uqZTMka"}},305:function(e,t,a){function n(e){return a(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./en.json":306,"./fr.json":307};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=305},306:function(e,t){e.exports={CatalogsListPage:{documentTitle:"Catalogs"}}},307:function(e,t){e.exports={CatalogsListPage:{documentTitle:"Catalogues"}}},308:function(e,t){e.exports={header:"CatalogHarvestView-NmuJ22hK",content:"CatalogHarvestView-2C_N4EoR",results:"CatalogHarvestView-2iTLdbE7"}},309:function(e,t,a){function n(e){return a(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./en.json":310,"./fr.json":311};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=309},310:function(e,t){e.exports={CatalogHarvestView:{documentTitle:"Harvesting",harvestId:"Harvest ID",results:"Results",logs:"Logs"}}},311:function(e,t){e.exports={CatalogHarvestView:{documentTitle:"Moissonnage",harvestId:"Identifiant du moissonnage",results:"Résultats",logs:"Journaux"}}},360:function(e,t){e.exports={container:"ChartContainer-R9QLGXdk"}},361:function(e,t){e.exports={container:"DoughnutChart-1BgSq93T"}},362:function(e,t){e.exports={row:"CatalogHarvestsRow-3zziLw0R",successful:"CatalogHarvestsRow-2bJctNB-",failed:"CatalogHarvestsRow-22lyM7QO",center:"CatalogHarvestsRow-30hddV7w",right:"CatalogHarvestsRow-3sBu1ow-"}},363:function(e,t){e.exports={table:"CatalogHarvestsTable-SOyQaCnj",center:"CatalogHarvestsTable-3SXaHtXk",right:"CatalogHarvestsTable-1jM3DQQ7",noResults:"CatalogHarvestsTable-a6ym6E_C"}},364:function(e,t){e.exports={container:"CatalogHarvestsView-1kIBaBaH",table:"CatalogHarvestsView-1a9u6leZ",stats:"CatalogHarvestsView-3iDETmyj",sync:"CatalogHarvestsView-3NMLs2K0"}},365:function(e,t){e.exports={title:"CatalogStatistics-3OAPeHd9",section:"CatalogStatistics-5cDD2O7s",chart:"CatalogStatistics-GKcL59AL"}},366:function(e,t){e.exports={container:"CatalogFacets-3-B9yAOV",facet:"CatalogFacets-2qfZEQv_"}},367:function(e,t){e.exports={header:"CatalogView-2DzmcFh5",section:"CatalogView-2AQsfuLM"}},368:function(e,t,a){function n(e){return a(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./en.json":369,"./fr.json":370};n.keys=function(){return Object.keys(o)},n.resolve=r,e.exports=n,n.id=368},369:function(e,t){e.exports={CatalogFacetsList:{organizationsTitle:"Organizations",keywordsTitle:"Keywords"},CatalogHarvestsRow:{success:"Successful",fail:"Failure",details:"Details"},CatalogHarvestsTable:{status:"Status",records:"Records",delta:"Delta",date:"Date",inProgress:"In progress…",noHarvest:"No harvest carried out…"},CatalogHarvestsView:{title:"Catalog harvesting",buttonText:"Synchronize",chartTitle:"Change in number of records per harvest"},CatalogStatistics:{catalogIndicatorTitle:"Indicators for the complete catalog",recordsCounterTitle:"Records",recordsChartTitle:"Distribution of record types",metadataChartTitle:"Distribution of metadata types",datasetsIndicatorTitle:"Indicators for datasets",openDataPercentTitle:"Percentage of open data",downloadablePercentTitle:"Percentage of downloadable dataset",dataTypeChartTitle:"Distribution of data types"},CatalogView:{catalogService:"Direct access to catalog service",catalogSearchTitle:"Search in catalog datasets"}}},370:function(e,t){e.exports={CatalogFacetsList:{organizationsTitle:"Organisations",keywordsTitle:"Mots-clés"},CatalogHarvestsRow:{success:"Réussi",fail:"Échec",details:"Détails"},CatalogHarvestsTable:{status:"Statut",records:"Enregistrements",delta:"Delta",date:"Date",inProgress:"En cours…",noHarvest:"Aucun moissonage réalisé…"},CatalogHarvestsView:{title:"Moissonnage du catalogue",buttonText:"Synchroniser",chartTitle:"Évolution du nombre d’enregistrements par moissonnage"},CatalogStatistics:{catalogIndicatorTitle:"Indicateurs concernant la totalité du catalogue",recordsCounterTitle:"Enregistrements",recordsChartTitle:"Répartition des types d‘enregistrements",metadataChartTitle:"Répartition des types de meta donnée",datasetsIndicatorTitle:"Indicateurs concernant les jeux de données",openDataPercentTitle:"Pourcentage de données ouvertes",downloadablePercentTitle:"Pourcentage de jeu de données téléchargeable",dataTypeChartTitle:"Répartition des types de donnée"},CatalogView:{catalogService:"Accès direct au service du catalogue",catalogSearchTitle:"Rechercher dans les jeux de données du catalogue"}}},400:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){return{labels:Object.keys(e).map(function(e){return e}),datasets:[{label:t("components.Histogram.label"),lineTension:.2,backgroundColor:Ve[0],data:Object.keys(e).map(function(t){return e[t]})}]}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var S,O,_=a(0),j=a(7),w=a(224),A=a(43),N=a(42),L=a(90),H=function(){return function(e){return e({type:"CATALOGS_LIST_PENDING"}),Object(L.b)("https://geo.data.gouv.fr/api/geogw/catalogs").then(function(t){e({type:"CATALOGS_LIST_SUCCESS",payload:t})}).catch(function(t){e({type:"CATALOGS_LIST_FAILURE",error:t})})}},G=(a(1),a(3)),I=a(17),R=a(28),D=a(13),P=a(104),V=a(304),k=a.n(V),x=a(87),F=a.n(x),U=function(e){function t(){return n(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentDidMount=function(){(0,this.props.fetchCatalogs)()},t.prototype.render=function(){var e=this.props,t=e.catalogs,a=e.t;return _.default.createElement("div",{className:k.a.container,style:{background:"url("+F.a+") bottom / 101% no-repeat, linear-gradient(to top, #41dcd7, #3083b2)"}},_.default.createElement(I.Helmet,{title:a("CatalogsListPage.documentTitle")}),_.default.createElement(R.a,{fluid:!0},_.default.createElement("h1",null,a("CatalogsListPage.documentTitle")),_.default.createElement(D.a,{isLoading:t.pending,error:t.error},_.default.createElement("div",{className:k.a.catalogs},t.catalogs.map(function(e){return _.default.createElement("div",{key:e._id,className:k.a.catalog},_.default.createElement(P.a,{catalog:e}))})))))},t}(_.default.PureComponent),M=Object(G.translate)("Catalogs.CatalogsList")(U),z=M,B=Object(N.connect)(function(e){return{catalogs:e.catalogs}},{fetchCatalogs:H})(z),Q=a(96),Y={pending:!1,error:!1,catalogs:[]},q=(S={},S.CATALOGS_LIST_PENDING=function(e,t){return Object.assign({},e,{pending:!0,error:!1})},S.CATALOGS_LIST_SUCCESS=function(e,t){return Object.assign({},e,{pending:!1,catalogs:Object(Q.b)(t.payload),error:!1})},S.CATALOGS_LIST_FAILURE=function(e,t){return Object.assign({},e,{pending:!1,error:t.error})},S),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments[1],a=q[t.type];return a?a(e,t):e},K=Object(w.a)("catalogs",J)(Object(A.a)("Catalogs.CatalogsList",function(e){return a(305)("./"+e+".json")})(B)),Z="https://geo.data.gouv.fr/api/geogw",X=function(e){return function(t){return t({type:"CATALOGS_GET_PENDING"}),Object(L.b)(Z+"/catalogs/"+e).then(function(e){t({type:"CATALOGS_GET_SUCCESS",payload:e})}).catch(function(e){t({type:"CATALOGS_GET_FAILURE",error:e})})}},W=function(e){return function(t){return t({type:"CATALOGS_GET_METRICS_PENDING"}),Object(L.b)(Z+"/catalogs/"+e+"/metrics").then(function(e){t({type:"CATALOGS_GET_METRICS_SUCCESS",payload:e})}).catch(function(e){t({type:"CATALOGS_GET_METRICS_FAILURE",error:e})})}},$=function(e){return function(t){return t({type:"CATALOGS_GET_HARVESTS_PENDING"}),Object(L.b)(Z+"/services/"+e+"/synchronizations").then(function(e){t({type:"CATALOGS_GET_HARVESTS_SUCCESS",payload:e})}).catch(function(e){t({type:"CATALOGS_GET_HARVESTS_FAILURE",error:e})})}},ee=function(e){return function(t){return t({type:"CATALOGS_SYNC_PENDING"}),Object(L.c)(Z+"/services/"+e+"/sync").then(function(e){t({type:"CATALOGS_SYNC_SUCCESS",payload:e})}).catch(function(e){t({type:"CATALOGS_SYNC_FAILURE",error:e})})}},te=function(e,t){return function(a){return a({type:"HARVESTS_GET_PENDING"}),Object(L.b)(Z+"/services/"+e+"/synchronizations/"+t).then(function(e){a({type:"HARVESTS_GET_SUCCESS",payload:e})}).catch(function(e){a({type:"HARVESTS_GET_FAILURE",error:e})})}},ae=a(106),ne=ae.a,re=function(e){var t=e.logs;return _.default.createElement("div",null,t.map(function(e,t){return _.default.createElement("pre",{key:t},_.default.createElement("code",null,e))}))},oe=re,le=oe,se=function(e){var t=e.logs;return _.default.createElement("ul",null,t.map(function(e,t){return _.default.createElement("li",{key:t},e.split(":")[0],": ",_.default.createElement("strong",null,e.split(":")[1]))}))},ce=se,ie=ce,ue=a(308),de=a.n(ue),fe=function(e){var t=e.catalog,a=e.harvest,n=e.t,r="successful"===a.status;return _.default.createElement("div",{className:de.a.container},_.default.createElement(I.Helmet,{title:n("CatalogHarvestView.documentTitle")+" : "+a._id}),_.default.createElement("div",{className:de.a.header,style:"background: url("+F.a+") bottom / 101% no-repeat, linear-gradient(to top, #41dcd7, #3083b2)"},_.default.createElement("h1",null,_.default.createElement(j.Link,{to:"/catalogs/"+t._id},t.name))),_.default.createElement("div",{className:de.a.content},_.default.createElement("p",null,n("CatalogHarvestView.harvestId"),": ",_.default.createElement("b",null,_.default.createElement("code",null,a._id))),_.default.createElement(ne,{harvest:a}),_.default.createElement("div",{className:de.a.results},_.default.createElement("h2",null,n(r?"CatalogHarvestView.results":"CatalogHarvestView.logs")),r?_.default.createElement(ie,{logs:a.log}):_.default.createElement(le,{logs:a.log}))))},ge=Object(G.translate)("Catalogs.CatalogHarvest")(fe),pe=ge,me=function(e){function t(){return l(this,t),s(this,e.apply(this,arguments))}return c(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.match,a=e.getCatalog,n=e.getHarvest;a(t.params.catalogId),n(t.params.catalogId,t.params.harvestId)},t.prototype.render=function(){var e=this.props,t=e.catalog,a=e.harvest;return _.default.createElement("div",null,_.default.createElement(D.a,{isLoading:t.pending||a.pending,error:t.error||a.error},_.default.createElement(pe,{catalog:t.catalog,harvest:a.harvest})))},t}(_.default.PureComponent),he=me,Ee=he,ve=Object(N.connect)(function(e){return{catalog:e.catalog.catalog,harvest:e.catalog.harvest}},{getCatalog:X,getHarvest:te})(Ee),Ce={catalog:{pending:!1,error:!1,catalog:null},metrics:{pending:!1,error:!1,metrics:null},harvests:{pending:!1,error:!1,harvests:[]},harvest:{pending:!1,error:!1,harvest:null}},be=(O={},O.CATALOGS_GET_PENDING=function(e,t){return Object.assign({},e,{catalog:Object.assign({},e.catalog,{pending:!0,error:!1})})},O.CATALOGS_GET_SUCCESS=function(e,t){return Object.assign({},e,{catalog:Object.assign({},e.catalog,{pending:!1,catalog:t.payload,error:!1})})},O.CATALOGS_GET_FAILURE=function(e,t){return Object.assign({},e,{catalog:Object.assign({},e.catalog,{pending:!1,error:t.error})})},O.CATALOGS_GET_METRICS_PENDING=function(e,t){return Object.assign({},e,{metrics:Object.assign({},e.metrics,{pending:!0,error:!1})})},O.CATALOGS_GET_METRICS_SUCCESS=function(e,t){return Object.assign({},e,{metrics:Object.assign({},e.metrics,{pending:!1,metrics:t.payload,error:!1})})},O.CATALOGS_GET_METRICS_FAILURE=function(e,t){return Object.assign({},e,{metrics:Object.assign({},e.metrics,{pending:!1,error:t.error})})},O.CATALOGS_GET_HARVESTS_PENDING=function(e,t){return Object.assign({},e,{harvests:Object.assign({},e.harvests,{pending:!0,error:!1})})},O.CATALOGS_GET_HARVESTS_SUCCESS=function(e,t){return Object.assign({},e,{harvests:Object.assign({},e.harvests,{pending:!1,harvests:t.payload,error:!1})})},O.CATALOGS_GET_HARVESTS_FAILURE=function(e,t){return Object.assign({},e,{harvests:Object.assign({},e.harvests,{pending:!1,error:t.error})})},O.CATALOGS_SYNC_PENDING=function(e,t){return e},O.CATALOGS_SYNC_SUCCESS=function(e,t){return Object.assign({},e,{catalog:Object.assign({},e.catalog,{catalog:Object.assign({},e.catalog.catalog,{service:Object.assign({},e.catalog.catalog.service,{sync:Object.assign({},e.catalog.catalog.service.sync,{pending:!0})})})})})},O.CATALOGS_SYNC_FAILURE=function(e,t){return e},O.HARVESTS_GET_PENDING=function(e,t){return Object.assign({},e,{harvest:Object.assign({},e.harvest,{pending:!0,error:!1})})},O.HARVESTS_GET_SUCCESS=function(e,t){return Object.assign({},e,{harvest:Object.assign({},e.harvest,{pending:!1,harvest:t.payload})})},O.HARVESTS_GET_FAILURE=function(e,t){return Object.assign({},e,{harvest:Object.assign({},e.harvest,{pending:!1,error:t.error})})},O),ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments[1],a=be[t.type];return a?a(e,t):e},Te=Object(w.a)("catalog",ye)(Object(A.a)("Catalogs.CatalogHarvest",function(e){return a(309)("./"+e+".json")})(ve)),Se=a(88),Oe=a.n(Se),_e=a(93),je=a(101),we=a.n(je),Ae=we()({loader:function(){return a.e(8).then(a.bind(null,401))},loading:D.a}),Ne=Ae,Le=Ne,He=a(95),Ge=a(360),Ie=a.n(Ge),Re=function(e){return function(t){function a(){return u(this,a),d(this,t.apply(this,arguments))}return f(a,t),a.prototype.render=function(){var t=this.props,a=t.title,n=i(t,["title"]);return _.default.createElement("div",{className:Ie.a.container},_.default.createElement("h3",null,a),_.default.createElement(e,n))},a}(_.default.PureComponent)},De=Re,Pe=De,Ve=["#2185D0","#00B5AD","#21BA45","#FBBD08","#A333C8","#e03997","#F2711C","#DB2828","#a5673f","#DDDDDD","#000000"],ke=a(361),xe=a.n(ke),Fe=function(e,t){var a=Object.keys(e).sort(function(t,a){return e[t]<e[a]});return{labels:a.map(function(e){return t("components.DoughnutChart."+e,{defaultValue:e})}),datasets:[{data:a.map(function(t){return e[t]}),backgroundColor:Ve.slice(0,a.length)}]}},Ue=function(e){var t=e.data,a=e.t,n=Fe(t||{},a);return 0===n.labels.length?_.default.createElement("h1",null,a("components.DoughnutChart.noData")):1===n.labels.length?_.default.createElement(He.a,{value:100,total:100,label:n.labels[0],size:"medium"}):_.default.createElement("div",{className:xe.a.container},_.default.createElement(Le,{chartType:"Doughnut",className:"doughnut computer",data:n,width:360}))},Me=Pe(Object(G.translate)("Common")(Ue)),ze=Me,Be=function(e){var t=e.data,a=e.width,n=e.height,r=e.t,o=g(t,r),l={scales:{yAxes:[{ticks:{beginAtZero:!0}}]}};return _.default.createElement(Le,{chartType:"Line",data:o,width:a,height:n,options:l})},Qe=Pe(Object(G.translate)("Common")(Be)),Ye=Qe,qe=a(89),Je=function(e){var t=e.delta;return t>0?_.default.createElement("div",null,_.default.createElement("i",{className:"long green arrow up icon"})," +",t):t<0?_.default.createElement("div",null,_.default.createElement("i",{className:"long red arrow down icon"})," ",t):_.default.createElement("div",null,"0")},Ke=Je,Ze=Ke,Xe=a(362),We=a.n(Xe),$e=function(e){var t=e.harvest,a=e.previousHarvest,n=e.catalogId,r=e.t;return _.default.createElement("tr",{className:We.a.row},_.default.createElement("td",null,_.default.createElement("div",{className:We.a[t.status]},r("successful"===t.status?"CatalogHarvestsRow.success":"CatalogHarvestsRow.fail"))),_.default.createElement("td",{className:We.a.center},t.itemsFound),_.default.createElement("td",{className:We.a.center},a&&_.default.createElement(Ze,{delta:t.itemsFound-a.itemsFound})),_.default.createElement("td",{className:We.a.center},Object(qe.a)(t.finished)),_.default.createElement("td",{className:We.a.right},_.default.createElement(j.Link,{to:"/catalogs/"+n+"/harvest/"+t._id},r("CatalogHarvestsRow.details"))))},et=Object(G.translate)("Catalogs.Catalog")($e),tt=et,at=a(363),nt=a.n(at),rt=function(e){var t=e.harvests,a=e.catalogId,n=e.harvesting,r=e.t;return _.default.createElement("table",{className:nt.a.table},_.default.createElement("thead",null,_.default.createElement("tr",null,_.default.createElement("th",null,r("CatalogHarvestsTable.status")),_.default.createElement("th",{className:nt.a.center},r("CatalogHarvestsTable.records")),_.default.createElement("th",{className:nt.a.center},r("CatalogHarvestsTable.delta")),_.default.createElement("th",{className:nt.a.center},r("CatalogHarvestsTable.date")),_.default.createElement("th",{className:nt.a.right}))),_.default.createElement("tbody",null,n&&_.default.createElement("tr",null,_.default.createElement("td",null,r("CatalogHarvestsTable.inProgress")),_.default.createElement("td",null),_.default.createElement("td",null),_.default.createElement("td",null),_.default.createElement("td",null)),t.length?t.map(function(e,n){return _.default.createElement(tt,{key:e._id,harvest:e,previousHarvest:t[n+1],catalogId:a})}):_.default.createElement("tr",null,_.default.createElement("td",{colSpan:5,className:nt.a.noResults},r("CatalogHarvestsTable.noHarvest")))))},ot=Object(G.translate)("Catalogs.Catalog")(rt),lt=ot,st=a(364),ct=a.n(st),it=function(e){function t(){var a,n,r;p(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return a=n=m(this,e.call.apply(e,[this].concat(l))),n.onSync=function(e){var t=n.props,a=t.catalog;(0,t.syncCatalog)(a._id)},n.getGraphData=function(){var e=n.props,t=e.harvests,a=e.i18n,r=[].concat(t.harvests).reverse(),o=[];return r.forEach(function(e){if("successful"===e.status){var t=new Date(e.finished).toLocaleDateString(a.language).split("-").reverse().join("/");o[t]=e.itemsFound}}),o},r=a,m(n,r)}return h(t,e),t.prototype.componentDidMount=function(){var e=this.props;(0,e.getHarvests)(e.catalog._id)},t.prototype.render=function(){var e=this.props,t=e.harvests,a=e.catalog,n=e.t;return _.default.createElement("div",null,_.default.createElement("h2",null,n("CatalogHarvestsView.title")),_.default.createElement(D.a,{isLoading:t.pending,error:t.error},_.default.createElement("div",{className:ct.a.container},_.default.createElement("div",{className:ct.a.table},_.default.createElement(lt,{catalogId:a._id,harvests:t.harvests,harvesting:a.service.sync.pending}),_.default.createElement("button",{className:ct.a.sync,disabled:a.service.sync.pending,onClick:this.onSync},n("CatalogHarvestsView.buttonText"))),_.default.createElement("div",{className:ct.a.stats},_.default.createElement(Ye,{title:n("CatalogHarvestsView.chartTitle"),data:this.getGraphData()})))))},t}(_.default.PureComponent),ut=Object(G.translate)("Catalogs.Catalog")(it),dt=ut,ft=Object(N.connect)(function(e,t){return{catalog:t.catalog,harvests:e.catalog.harvests}},{getHarvests:$,syncCatalog:ee})(dt),gt=a(31),pt=a(52),mt=a(365),ht=a.n(mt),Et=function(e){var t=e.metrics,a=e.t,n=Object(gt.a)(t,"datasets.partitions.openness.yes",0),r=Object(gt.a)(t,"datasets.partitions.download.yes",0);return _.default.createElement("div",null,_.default.createElement("h2",{className:ht.a.title},a("CatalogStatistics.catalogIndicatorTitle")),_.default.createElement("div",{className:ht.a.section},_.default.createElement("div",{className:ht.a.chart},_.default.createElement(pt.a,{size:"medium",value:t.records.totalCount,title:a("CatalogStatistics.recordsCounterTitle")})),_.default.createElement("div",{className:ht.a.chart},_.default.createElement(ze,{title:a("CatalogStatistics.recordsChartTitle"),data:t.records.partitions.recordType})),_.default.createElement("div",{className:ht.a.chart},_.default.createElement(ze,{title:a("CatalogStatistics.metadataChartTitle"),data:t.records.partitions.metadataType}))),_.default.createElement("h2",null,a("CatalogStatistics.datasetsIndicatorTitle")),_.default.createElement("div",{className:ht.a.section},_.default.createElement("div",{className:ht.a.chart},_.default.createElement(He.a,{value:n,total:t.datasets.totalCount,size:"medium",title:a("CatalogStatistics.openDataPercentTitle")})),_.default.createElement("div",{className:ht.a.chart},_.default.createElement(He.a,{value:r,total:t.datasets.totalCount,size:"medium",title:a("CatalogStatistics.downloadablePercentTitle")})),_.default.createElement("div",{className:ht.a.chart},_.default.createElement(ze,{title:a("CatalogStatistics.dataTypeChartTitle"),data:t.datasets.partitions.dataType}))))},vt=Object(G.translate)("Catalogs.Catalog")(Et),Ct=vt,bt=a(234),yt=a(366),Tt=a.n(yt),St=function(e){var t=e.title,a=e.type,n=e.filters,r=e.onSearch;return _.default.createElement("div",{className:Tt.a.container},_.default.createElement("h2",null,t),Object.entries(n).map(function(e){var t=e[0],n=e[1];return _.default.createElement("div",{key:t,className:Tt.a.facet},_.default.createElement(bt.a,{name:a,value:t,count:n,addFilter:r}))}))},Ot=St,_t=Ot,jt=function(e){var t=e.catalog,a=e.metrics,n=e.onSearch,r=e.t,o=a.records.counts,l=o.organizations,s=o.keywords,c=function(e){return n({organization:e.value,catalog:t.name})},i=function(e){return n({keyword:e.value,catalog:t.name})};return _.default.createElement("div",null,_.default.createElement(_t,{title:r("CatalogFacetsList.organizationsTitle"),type:"organization",filters:l,onSearch:c}),_.default.createElement(_t,{title:r("CatalogFacetsList.keywordsTitle"),type:"keyword",filters:s,onSearch:i}))},wt=Object(G.translate)("Catalogs.Catalog")(jt),At=wt,Nt=a(367),Lt=a.n(Nt),Ht=function(e){function t(){var a,n,r;E(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return a=n=v(this,e.call.apply(e,[this].concat(l))),n.onSearch=function(e){var t=n.props;(0,t.onSearch)({q:e,catalog:t.catalog.name})},r=a,v(n,r)}return C(t,e),t.prototype.render=function(){var e=this.props,t=e.catalog,a=e.metrics,n=e.onSearch,r=e.t;return _.default.createElement("div",null,_.default.createElement(I.Helmet,{title:t.name}),_.default.createElement("div",{className:Lt.a.header,style:{background:"url("+F.a+") bottom / 101% no-repeat, linear-gradient(to top, #41dcd7, #3083b2)"}},_.default.createElement("h1",null,t.name),_.default.createElement("a",{href:t.service.location,target:"_blank"},r("CatalogView.catalogService"))),_.default.createElement("div",{className:Lt.a.section},_.default.createElement(Ct,{metrics:a})),_.default.createElement("div",{className:Lt.a.section},_.default.createElement(ft,{catalog:t})),_.default.createElement("div",{className:Lt.a.section},_.default.createElement("h2",null,r("CatalogView.catalogSearchTitle")),_.default.createElement(_e.a,{onSearch:this.onSearch,hasButton:!0})),_.default.createElement("div",{className:Lt.a.section},_.default.createElement(At,{catalog:t,metrics:a,onSearch:n})))},t}(_.default.PureComponent),Gt=Object(G.translate)("Catalogs.Catalog")(Ht),It=Gt,Rt=function(e){function t(){var a,n,r;b(this,t);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return a=n=y(this,e.call.apply(e,[this].concat(l))),n.onSearch=function(e){n.props.history.push({pathname:"/search",search:Oe.a.stringify(e)})},r=a,y(n,r)}return T(t,e),t.prototype.componentDidMount=function(){var e=this.props,t=e.match,a=e.getCatalog,n=e.getMetrics;a(t.params.catalogId),n(t.params.catalogId)},t.prototype.render=function(){var e=this.props,t=e.catalog,a=e.metrics;return _.default.createElement(D.a,{isLoading:t.pending||a.pending,error:t.error||a.error},_.default.createElement(It,{catalog:t.catalog,metrics:a.metrics,onSearch:this.onSearch}))},t}(_.default.PureComponent),Dt=Rt,Pt=Dt,Vt=Object(N.connect)(function(e){var t=e.catalog;return{catalog:t.catalog,metrics:t.metrics}},{getCatalog:X,getMetrics:W})(Pt),kt=Object(w.a)("catalog",ye)(Object(A.a)("Catalogs.Catalog",function(e){return a(368)("./"+e+".json")})(Vt)),xt=function(){return _.default.createElement(j.Switch,null,_.default.createElement(j.Route,{exact:!0,path:"/catalogs",component:K}),_.default.createElement(j.Route,{path:"/catalogs/:catalogId/harvest/:harvestId",component:Te}),_.default.createElement(j.Route,{path:"/catalogs/:catalogId",component:kt}))};t.default=xt}});
//# sourceMappingURL=catalogs.8a502e45325757339fb6.js.map