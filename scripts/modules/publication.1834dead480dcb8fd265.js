webpackJsonp([2],{234:function(e,t,n){"use strict";function a(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}t.a=a},235:function(e,t,n){"use strict";function a(e){return function(t,n,a){var r=Object(t);if(!Object(c.a)(t)){var o=Object(u.a)(n,3);t=Object(l.a)(t),n=function(e){return o(r[e],e,r)}}var i=e(t,n,a);return i>-1?r[o?t[i]:i]:void 0}}function r(e){if("number"==typeof e)return e;if(Object(h.a)(e))return m;if(Object(p.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(p.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(b,"");var n=v.test(e);return n||E.test(e)?y(e.slice(2),n?2:8):g.test(e)?m:+e}function o(e){if(!e)return 0===e?e:0;if((e=O(e))===P||e===-P){return(e<0?-1:1)*j}return e===e?e:0}function i(e){var t=w(e),n=t%1;return t===t?n?t-n:t:0}function s(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var r=null==n?0:z(n);return r<0&&(r=_(a+r,0)),Object(d.a)(e,Object(u.a)(t,3),r)}var u=n(43),c=n(19),l=n(27),f=a,d=n(224),p=n(18),h=n(20),m=NaN,b=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,E=/^0o[0-7]+$/i,y=parseInt,O=r,P=1/0,j=1.7976931348623157e308,w=o,z=i,_=Math.max,N=s,C=f(N);t.a=C},374:function(e,t){e.exports={section:"User-2CxyhPJC",img:"User-2e2AtJT1",detail:"User-31zN56Lh"}},375:function(e,t){e.exports={header:"Layout-2edlxJMY",publishing:"Layout-1E5hwZmN",organizationLogo:"Layout-2D3gKnp2",container:"Layout-1RiVBjUz"}},376:function(e,t){e.exports={container:"OrganizationPreview-2dAg6lEZ",organization:"OrganizationPreview-1414_TnG",img:"OrganizationPreview-3NmJwddX",detail:"OrganizationPreview-2jGdLKDs"}},377:function(e,t){e.exports={container:"Organizations-1ux6MTEE"}},378:function(e,t){e.exports={container:"Errors-1no9c7gb"}},379:function(e,t){e.exports={link:"OrganizationProducersPreview-lCQSPUCQ"}},380:function(e,t){e.exports={link:"OrganizationMetrics-mzlVD2BG"}},381:function(e,t){e.exports={container:"AddCatalogs-1mRJyIvK",card:"AddCatalogs-IcmgAWBx",loader:"AddCatalogs-2ef2C22Q",warningMsg:"AddCatalogs-Em02HEwg"}},382:function(e,t){e.exports={catalogsStyle:"SourceCatalogs-2-nuwxNW",catalog:"SourceCatalogs-1kKEsoZj",remove:"SourceCatalogs-B7QGfh_a",buttonStyle:"SourceCatalogs-2oNwxHWX"}},383:function(e,t){e.exports={content:"ManageOrganization-_u5wJFtp",sections:"ManageOrganization-3iNvXW3w",section:"ManageOrganization-2FM4dAi9",previousPage:"ManageOrganization-2BYb5Z-8",organization:"ManageOrganization-3CIecK05"}},384:function(e,t){e.exports={msg:"ActivateOrganization-2nN0bVaj",activate:"ActivateOrganization-2kQTdbXR"}},385:function(e,t){e.exports={data:"DatasetToSelect-3CVv5iJF",progress:"DatasetToSelect-2i3CqS6J"}},386:function(e,t){e.exports={buttons:"DatasetsToBePublished-30i-IQDq",publishButton:"DatasetsToBePublished-4415I3f0",refresh:"DatasetsToBePublished-2ebaoAKc",disable:"DatasetsToBePublished-3X4sq9v0",selection:"DatasetsToBePublished-1djrlBM0",noData:"DatasetsToBePublished-3WtPqvmi"}},387:function(e,t){e.exports={data:"PublishedDatasets-1-bvX8CV"}},388:function(e,t){e.exports={container:"DatasetsPublication-3xUpydwy",header:"DatasetsPublication-2qM-CHxJ",success:"DatasetsPublication-2AjUtl2g",warning:"DatasetsPublication-3BMy1JSB",error:"DatasetsPublication-3zWtdgui"}},389:function(e,t){e.exports={previousPage:"OrganizationDatasets-3DstENWW"}},390:function(e,t){e.exports={container:"RelatedProducers-1ojfGJFE",header:"RelatedProducers-1dmoW5Ri",producers:"RelatedProducers-2HujMnzq",dissociate:"RelatedProducers-2yyH4-2r"}},391:function(e,t){e.exports={container:"UnrelatedProducers-2kLUVfXb",header:"UnrelatedProducers-CEwa0iv1",subtitle:"UnrelatedProducers-1FOvu-KQ",producers:"UnrelatedProducers-xRyuKU15",associate:"UnrelatedProducers-1SnRig_z"}},392:function(e,t){e.exports={item:"OtherProducersItem-2ei8gnOq"}},393:function(e,t){e.exports={container:"OtherProducers-2mmbO7qE",header:"OtherProducers-jHD9CLpM",subtitle:"OtherProducers-prw_WmIY",producers:"OtherProducers-2e7YAkOU",organization:"OtherProducers-2YfmcbId"}},394:function(e,t){e.exports={previousPage:"Producers-V1J01CdD"}},401:function(e,t,n){"use strict";function a(e){var t=e.user,n=e.organization,a=e.pageTitle,r=e.title,o=e.children;if(!t)return null;var i=n&&n.logo?n.logo:"/assets/no-img.png";return F.default.createElement("div",{className:oe.a.publishing},F.default.createElement($.Helmet,{title:a}),F.default.createElement("div",{className:oe.a.header,style:{background:"url("+se.a+") bottom / 101% no-repeat, linear-gradient(to top, #41dcd7, #3083b2)"}},F.default.createElement(ae,{user:t})),n&&F.default.createElement(Z.Link,{className:oe.a.organizationLogo,to:"/publication/"+n.id,style:{"background-image":"url("+i+")"}}),F.default.createElement("div",{className:oe.a.container},F.default.createElement("h3",null,r),o))}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,n,a){for(var r=n-1,o=e.length;++r<o;)if(a(e[r],t))return r;return-1}function u(e,t,n,a){var r=a?Ue:Ae.a,o=-1,i=t.length,s=e;for(e===t&&(t=Object(Re.a)(t)),n&&(s=Object(Se.a)(e,Object(ke.a)(n)));++o<i;)for(var u=0,c=t[o],l=n?n(c):c;(u=r(s,l,u,a))>-1;)s!==e&&Be.call(s,u,1),Be.call(e,u,1);return e}function c(e,t){return e&&e.length&&t&&t.length?Me(e,t):e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e){var t=e.organizationDetails,n=e.organization,a=e.user,r=e.metrics;return a?t?n&&r?F.default.createElement(ue,{user:a,organization:t,pageTitle:t.name,title:t.name},F.default.createElement(st,e)):F.default.createElement(ue,{user:a,organization:t,pageTitle:t.name,title:t.name},F.default.createElement(lt,{organizationId:t.id,onActivation:function(){return e.onActivation()}})):F.default.createElement(ve,{errors:["Cette organisation n'existe pas sur data.gouv.fr"]}):F.default.createElement(ve,{errors:["Vous devez être authentifié pour accéder à cette page"]})}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){return function(n){function a(e){j(this,a);var t=w(this,n.call(this,e));return t.state={errors:[]},t}return z(a,n),a.prototype.componentDidMount=function(){var e=this,n=Promise.all(Object.keys(t).map(function(n){return Object(ye.c)(t[n],e,n)}));return n.then(function(){return e.setState({dependenciesReady:!0})}),n},a.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},a.prototype.render=function(){var t=this.state,n=t.errors,a=t.dependenciesReady;return n.length?F.default.createElement(ve,{errors:n}):a?F.default.createElement(e,Object.assign({},this.state,this.props)):F.default.createElement(Ye.a,{isLoading:!0})},a}(F.Component)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t){return e.filter(function(e){return e.associatedTo&&e.associatedTo===t})}function J(e){return e.filter(function(e){return!e.associatedTo})}function Y(e,t){return e.filter(function(e){return e.associatedTo&&e.associatedTo!==t})}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var F=n(0),Z=n(7),$=n(17),ee=(n(1),n(374)),te=n.n(ee),ne=function(e){var t=e.user,n=t.avatar?{url:t.avatar,alt:t.slug}:{url:"/assets/avatar.png",alt:""};return F.default.createElement("div",{className:te.a.section},F.default.createElement(Z.Link,{className:te.a.detail,to:"/publication"},F.default.createElement("img",{className:te.a.img,src:n.url,alt:n.alt}),F.default.createElement("div",null,t.first_name," ",t.last_name)))},ae=ne,re=n(375),oe=n.n(re),ie=n(86),se=n.n(ie),ue=a,ce=n(376),le=n.n(ce),fe=function(e){var t=e.organization,n=t&&t.logo?t.logo:"/assets/no-img.png";return F.default.createElement("div",{className:le.a.container},F.default.createElement(Z.Link,{className:le.a.organization,to:"/publication/"+t.id},F.default.createElement("img",{className:le.a.img,src:n,alt:t.slug}),F.default.createElement("div",{className:le.a.detail},t.name)))},de=fe,pe=n(377),he=function(e){var t=e.organizations;return F.default.createElement("div",{className:pe.container},F.default.createElement($.Helmet,{title:"Vos organisations"}),t.map(function(e,t){return F.default.createElement(de,{key:t,organization:e})}))},me=he,be=n(378),ge=function(e){var t=e.errors,n=t.length>1?F.default.createElement("h3",null,"Des erreurs sont survenues"):F.default.createElement("h3",null,"Une erreur est survenue");return F.default.createElement("div",{className:be.container},F.default.createElement($.Helmet,{title:"Erreur"}),n,F.default.createElement("ul",null,t.map(function(e,t){return F.default.createElement("li",{key:t},e)})))},ve=ge,Ee=n(83),ye=n(84),Oe=Object({NODE_ENV:"production",PUBLIC_URL:"https://geo.data.gouv.fr",DATAGOUV_API_URL:"https://geo.data.gouv.fr/dgv/proxy-api/1",DATAGOUV_API_KEY:"",PUBLICATION_BASE_URL:"https://geo.data.gouv.fr/dgv",GEODATA_API_URL:"https://inspire.data.gouv.fr/api/geogw",PIWIK_URL:"https://stats.data.gouv.fr",PIWIK_SITE_ID:"32"}),Pe=Oe.PUBLICATION_BASE_URL,je=Oe.PUBLIC_URL,we=function(e){function t(n){r(this,t);var a=o(this,e.call(this,n));return a.state={user:null,errors:[]},a}return i(t,e),t.prototype.componentWillMount=function(){var e=this;return Object(ye.c)(Object(Ee.p)(),this,"user").then(function(){if(!e.state.user){var t=encodeURI(je+"/publication"),n=Pe+"/login?redirect="+t;document.location.replace(n)}})},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.render=function(){var e=this.state,t=e.user,n=e.errors;return n.length?F.default.createElement(ve,{errors:n}):t?F.default.createElement(ue,{user:t,pageTitle:"Vos organisations",title:"Vos organisations"},F.default.createElement(me,{organizations:t.organizations})):F.default.createElement(ve,{errors:["Vous devez être authentifié pour accéder à cette page"]})},t}(F.Component),ze=we,_e=n(379),Ne=function(e){var t=e.organizationId,n=e.producers;return F.default.createElement("div",null,F.default.createElement("div",null,F.default.createElement("strong",null,n.length)," producteurs sont associés à votre organisation"),F.default.createElement("ul",null,n.map(function(e,t){return F.default.createElement("li",{key:t},e._id)})),F.default.createElement(Z.Link,{className:_e.link,to:"/publication/"+t+"/producers"},"Associer des producteurs"))},Ce=Ne,Te=n(380),Ie=function(e){var t=e.organizationId,n=e.metrics,a=n.published,r=n.notPublishedYet,o=n.publishedByOthers;return F.default.createElement("div",null,F.default.createElement("p",null,F.default.createElement("strong",null,a)," jeux de données sont ",F.default.createElement("strong",null,"publiés et accessibles")," sur ",F.default.createElement("a",{href:"https://data.gouv.fr"},"data.gouv.fr")),F.default.createElement("p",null,F.default.createElement("strong",null,r)," jeux de données sont ",F.default.createElement("strong",null,"en attente de publication")),F.default.createElement("p",null,F.default.createElement("strong",null,o)," jeux de données sont ",F.default.createElement("strong",null,"publiés par d'autres producteurs")),F.default.createElement(Z.Link,{className:Te.link,to:"/publication/"+t+"/datasets"},"Publier des données"))},xe=Ie,De=n(99),Se=n(48),Ae=n(236),Ue=s,ke=n(54),Re=n(234),Le=Array.prototype,Be=Le.splice,Me=u,We=c,Ve=Object(De.a)(We),Je=Ve,Ye=n(13),qe=n(85),Ke=n(93),He=n(95),Ge=n(381),Qe=n.n(Ge),Xe=function(e){function t(n){l(this,t);var a=f(this,e.call(this,n));return a.state={errors:[]},a}return d(t,e),t.prototype.componentWillMount=function(){return Object(ye.c)(Object(Ee.f)(),this,"catalogs")},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.render=function(){var e=this.state.catalogs,t=this.props,n=t.sourceCatalogs,a=t.addCatalog;if(!this.state.catalogs)return F.default.createElement(Ye.a,{isLoading:!0,className:Qe.a.loader});var r=Object(He.a)(e,n),o=Object(He.b)(r);return F.default.createElement("div",{className:Qe.a.container},o.map(function(e,t){return F.default.createElement("div",{key:t,className:Qe.a.card},F.default.createElement(Ke.a,{catalog:e}),F.default.createElement(qe.a,{action:function(){return a(e.id)},text:"Ajouter",icon:"plus"}))}),F.default.createElement("div",{className:Qe.a.warningMsg},F.default.createElement("i",{className:"styles.warning icon"}),"Seuls les catalogues disposant de données ouvertes et téléchargeables sont disponible ici."))},t}(F.Component),Fe=Xe,Ze=function(e){function t(n){p(this,t);var a=h(this,e.call(this,n));return a.state={catalog:null,errors:[]},a}return m(t,e),t.prototype.componentWillMount=function(){return Object(ye.c)(Object(Ee.e)(this.props.catalogId),this,"catalog")},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.render=function(){var e=this.state.catalog;return e&&F.default.createElement(Ke.a,{catalog:e})},t}(F.Component),$e=Ze,et=n(382),tt=n.n(et),nt=function(e){function t(n){b(this,t);var a=g(this,e.call(this,n));return a.state={catalogs:[].concat(a.props.sourceCatalogs),displayCatalogs:!1,errors:[]},a}return v(t,e),t.prototype.toggleCatalogList=function(){this.setState({displayCatalogs:!this.state.displayCatalogs})},t.prototype.addCatalog=function(e){var t=this,n=this.state.catalogs,a=this.props.organizationId;if(!n.includes(e)){var r=[].concat(n,[e]);Object(Ee.r)(a,{sourceCatalogs:r}).then(function(){return t.setState({catalogs:r})})}},t.prototype.removeCatalog=function(e){var t=this,n=this.state.catalogs,a=this.props.organizationId;if(n.includes(e)){var r=Je(n,e);Object(Ee.r)(a,{sourceCatalogs:r}).then(function(){return t.setState({catalogs:r})})}},t.prototype.render=function(){var e=this,t=this.state,n=t.displayCatalogs,a=t.catalogs,r=t.errors;return r.length?F.default.createElement(ve,{errors:r}):F.default.createElement("div",null,F.default.createElement("div",{className:tt.a.catalogsStyle},a.map(function(t){return F.default.createElement("div",{key:t,className:tt.a.catalog},F.default.createElement($e,{catalogId:t,size:"small"}),F.default.createElement(qe.a,{className:tt.a.remove,action:function(){return e.removeCatalog(t)},text:"Supprimer",icon:"trash"}),n?F.default.createElement(qe.a,{action:function(){return e.toggleCatalogList()},text:"Réduire",icon:"minus"}):F.default.createElement(qe.a,{action:function(){return e.toggleCatalogList()},text:"Ajouter des catalogues",icon:"plus"}))}),n&&F.default.createElement(Fe,{sourceCatalogs:a,addCatalog:function(t){return e.addCatalog(t)}})))},t}(F.Component),at=nt,rt=n(383),ot=n.n(rt),it=function(e){var t=e.organization,n=e.metrics;return F.default.createElement("div",{className:ot.a.content},F.default.createElement("div",{className:ot.a.sections},F.default.createElement("div",{className:ot.a.section},F.default.createElement("h4",null,"Catalogues source"),F.default.createElement(at,{organizationId:t._id,sourceCatalogs:t.sourceCatalogs})),F.default.createElement("div",{className:ot.a.section},F.default.createElement("h4",null,"Producteurs source"),F.default.createElement(Ce,{organizationId:t._id,producers:t.producers})),F.default.createElement("div",{className:ot.a.section},F.default.createElement("h4",null,"Jeux de données"),F.default.createElement(xe,{metrics:n,organizationId:t._id}))),F.default.createElement("div",{className:ot.a.previousPage},F.default.createElement(Z.Link,{to:"/publication"},F.default.createElement("i",{className:"arrow left icon"})," Retour aux organisations")))},st=it,ut=n(384),ct=function(e){function t(n){E(this,t);var a=y(this,e.call(this,n));return a.state={errors:[],activating:!1},a}return O(t,e),t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.activateAccount=function(){var e=this;return this.setState({activating:!0}),Object(ye.b)(Object(Ee.r)(this.props.organizationId),this).promise.then(function(){e.setState({activating:!1}),e.props.onActivation()}).catch(function(t){t.isCanceled||e.setState({activating:!1,errors:["Impossible d'activer l'outil sur votre organisation"]})})},t.prototype.render=function(){var e=this,t=this.state,n=t.errors,a=t.activating;return n.length?F.default.createElement(ve,{errors:n}):F.default.createElement("div",{className:ut.msg},F.default.createElement("h3",null,"L'outil de publication n'est pas encore activé."),F.default.createElement("button",{className:ut.activate,onClick:function(){return e.activateAccount()},disabled:a},"Activer l'outil"))},t}(F.Component),lt=ct,ft=n(102),dt=function(e){function t(n){N(this,t);var a=C(this,e.call(this,n));return a.state={dependencies:a.getDependencies()},a}return T(t,e),t.prototype.getDependencies=function(){var e=this.props.match.params.organizationId;return{user:Object(Ee.p)(),metrics:Object(ft.a)(Object(Ee.g)(e)),organization:Object(ft.a)(Object(Ee.l)(e)),organizationDetails:Object(ft.a)(Object(Ee.m)(e))}},t.prototype.update=function(){this.setState({dependencies:this.getDependencies()})},t.prototype.render=function(){var e=this,t=_(P,this.state.dependencies);return F.default.createElement(t,{onActivation:function(){return e.update()}})},t}(F.Component),pt=dt,ht=n(385),mt=function(e){var t=e.dataset,n=e.isSelected,a=e.inProgress,r=e.change;return F.default.createElement("div",{className:ht.data},F.default.createElement(Z.Link,{to:"/datasets/"+t._id},t.title),a?F.default.createElement("div",{className:ht.progress},"Publication en cours..."):F.default.createElement("input",{type:"checkbox",checked:n,onChange:function(){return r(t)}}))},bt=mt,gt=n(386),vt=function(e){function t(n){I(this,t);var a=x(this,e.call(this,n));return a.state={toPublish:[],publicationsInProgress:[]},a}return D(t,e),t.prototype.publishDatasets=function(){var e=this.state.toPublish,t=this.props.organizationId;e.length&&(this.setState({publicationsInProgress:[].concat(e)}),e.map(function(e){return Object(Ee.q)(e._id,t)}))},t.prototype.addDatasetToPublish=function(e){var t=this.state.toPublish;t.includes(e)||(t.push(e),this.setState({toPublish:t}))},t.prototype.removeDatasetToPublish=function(e){this.setState({toPublish:this.state.toPublish.filter(function(t){return t._id!==e._id})})},t.prototype.selection=function(){var e=this.props.datasets;this.state.toPublish.length===e.length?this.setState({toPublish:[]}):this.setState({toPublish:[].concat(e)})},t.prototype.render=function(){var e=this,t=this.props,n=t.datasets,a=t.update,r=this.state,o=r.toPublish,i=r.publicationsInProgress,s=o.length===n.length?"Tout désélectionner":"Tout sélectionner",u=o.length===n.length?"Publier toutes les données":"Publier les données sélectionnées",c=o.length?gt.publishButton:gt.disable;return n.length?F.default.createElement("div",null,n.map(function(t,n){var a=!0===o.includes(t);return F.default.createElement(bt,{key:n,dataset:t,isSelected:a,inProgress:!0===i.includes(t),change:a?function(t){return e.removeDatasetToPublish(t)}:function(t){return e.addDatasetToPublish(t)}})}),i.length?F.default.createElement("button",{className:gt.refresh,onClick:function(){return a()}},"Actualiser les données ",F.default.createElement("i",{className:"refresh icon"})):null,F.default.createElement("div",{className:gt.buttons},F.default.createElement("div",{className:gt.button+" "+gt.selection,onClick:function(){return e.selection()}},s),F.default.createElement("div",{className:gt.button+" "+c,onClick:function(){return e.publishDatasets()}},u))):F.default.createElement("div",{className:gt.noData},"Aucun jeu de données.")},t}(F.Component),Et=vt,yt=n(387),Ot=function(e){var t=e.datasets;return t.length?F.default.createElement("div",null,t.map(function(e,t){return F.default.createElement("div",{key:t,className:yt.data},F.default.createElement(Z.Link,{to:"/datasets/"+e._id},e.title),F.default.createElement("a",{href:e.remoteUrl,target:"blank"},"Fiche data.gouv.fr"))})):F.default.createElement("div",{className:yt.data},"Aucun jeu de données.")},Pt=Ot,jt=n(388),wt=n.n(jt),zt=function(e){function t(){return S(this,t),A(this,e.apply(this,arguments))}return U(t,e),t.prototype.render=function(){var e=this.props,t=e.datasets,n=e.title,a=e.update,r=e.organizationId,o=e.status,i=t.sort(function(e,t){return e.title.localeCompare(t.title)});return F.default.createElement("div",{className:wt.a.container},F.default.createElement("div",{className:wt.a.header+" "+wt.a[o]},F.default.createElement("div",null,n),F.default.createElement("div",null,t.length)),"error"===o?F.default.createElement(Et,{datasets:i,update:function(){return a()},organizationId:r}):F.default.createElement(Pt,{datasets:i}))},t}(F.Component),_t=zt,Nt=n(389),Ct=function(e){var t=e.published,n=e.notPublishedYet,a=e.publishedByOthers,r=e.update,o=e.organizationId;return F.default.createElement("div",null,F.default.createElement(_t,{datasets:n,organizationId:o,title:"Données en attente de publication",status:"error",update:function(){return r()}}),F.default.createElement(_t,{datasets:t,organizationId:o,title:"Données publiées",status:"success"}),F.default.createElement(_t,{datasets:a,organizationId:o,title:"Données publiées par une autre organisation",status:"warning"}),F.default.createElement("div",{className:Nt.previousPage},F.default.createElement(Z.Link,{to:"/publication/"+o},F.default.createElement("i",{className:"arrow left icon"})," retour")))},Tt=Ct,It=function(e){function t(n){k(this,t);var a=R(this,e.call(this,n)),r=n.match.params.organizationId;return a.state={errors:[],organizationId:r},a}return L(t,e),t.prototype.componentWillMount=function(){return Promise.all([this.updateUser(),this.updatePublished(),this.updatePublishedByOthers(),this.updateNotPublishedYet()])},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.updateUser=function(){return Object(ye.c)(Object(Ee.p)(),this,"user")},t.prototype.updatePublished=function(){return Object(ye.c)(Object(Ee.i)(this.state.organizationId),this,"published")},t.prototype.updateNotPublishedYet=function(){return Object(ye.c)(Object(Ee.h)(this.state.organizationId),this,"notPublishedYet")},t.prototype.updatePublishedByOthers=function(){return Object(ye.c)(Object(Ee.j)(this.state.organizationId),this,"publishedByOthers")},t.prototype.updateDatasets=function(){return Promise.all([this.updatePublished(),this.updateNotPublishedYet()])},t.prototype.render=function(){var e=this,t=this.state,n=t.organizationId,a=t.user,r=t.published,o=t.notPublishedYet,i=t.publishedByOthers,s=t.errors,u={published:r,notPublishedYet:o,publishedByOthers:i};if(s.length)return F.default.createElement(ve,{errors:s});if(!a)return F.default.createElement(ve,{errors:["Vous devez être authentifié pour accéder à cette page"]});var c=a.organizations.find(function(e){return e.id===n});return c&&u.published&&u.notPublishedYet&&u.publishedByOthers?F.default.createElement(ue,{user:a,organization:c,pageTitle:c.name,title:"Jeux de données"},F.default.createElement(Tt,Object.assign({},u,{update:function(){return e.updateDatasets()},organizationId:n}))):null},t}(F.Component),xt=It,Dt=n(390),St=n.n(Dt),At=function(e){var t=e.producers,n=e.action;return F.default.createElement("div",{className:St.a.container},F.default.createElement("div",{className:St.a.header},F.default.createElement("div",null,"Producteurs rattachés à votre organisation"),F.default.createElement("div",null,t.length)),F.default.createElement("div",{className:St.a.list},t.map(function(e,t){return F.default.createElement("div",{className:St.a.producers,key:t},F.default.createElement("div",null,e._id),F.default.createElement("button",{className:St.a.dissociate,onClick:function(){return n(e)}},"Dissocier"))})))},Ut=At,kt=n(391),Rt=n.n(kt),Lt=function(e){var t=e.producers,n=e.action;return F.default.createElement("div",{className:Rt.a.container},F.default.createElement("div",{className:Rt.a.header},F.default.createElement("div",null,F.default.createElement("div",null,"Producteurs non rattachés"),F.default.createElement("div",{className:Rt.a.subtitle},"Ajoutez les producteurs dont vous souhaitez que les données ouvertes soient publiées dans votre organisation.")),F.default.createElement("div",null,t.length)),F.default.createElement("div",{className:Rt.a.list},t.map(function(e,t){return F.default.createElement("div",{className:Rt.a.producers,key:t},F.default.createElement("div",null,e._id),F.default.createElement("button",{className:Rt.a.associate,onClick:function(){return n(e)}},"Associer"))})))},Bt=Lt,Mt=n(235),Wt=n(392),Vt=n.n(Wt),Jt=function(e){var t=e.organizations,n=e.producer,a=Object(Mt.a)(t,function(e){return e._id===n.associatedTo});return F.default.createElement("div",{className:Vt.a.item},"Rattaché à ",F.default.createElement("a",{href:"https://www.data.gouv.fr/fr/organizations/"+a._id+"/"},a.name))},Yt=Jt,qt=n(393),Kt=n.n(qt),Ht=function(e){function t(n){B(this,t);var a=M(this,e.call(this,n));return a.state={errors:[],organizationProducers:[]},a}return W(t,e),t.prototype.componentDidMount=function(){var e=this.props.producers,t=e.map(function(e){return e.associatedTo});return Object(ye.c)(Object(Ee.o)(t),this,"organizations")},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.render=function(){var e=this.state.organizations,t=this.props.producers;return e?F.default.createElement("div",{className:Kt.a.container},F.default.createElement("div",{className:Kt.a.header},F.default.createElement("div",null,F.default.createElement("div",null,"Producteurs rattachés à d'autres organisations"),F.default.createElement("div",{className:Kt.a.subtitle},F.default.createElement("div",null,"Les producteurs de cette liste ne peuvent pas être rattachés à votre compte organisation parce qu'ils sont déjà rattachés à un autre compte. N\\'hésitez pas à contacter l'organisation de rattachement si vous estimez que votre propre compte est plus pertinent."),F.default.createElement("p",null,"En cas de difficulté, contactez ",F.default.createElement("a",{href:"mailto:geo@data.gouv.fr"},"notre équipe"),"."))),F.default.createElement("div",null,t.length)),F.default.createElement("div",{className:Kt.a.list},t.map(function(t,n){return F.default.createElement("div",{className:Kt.a.producers,key:n},F.default.createElement("div",null,t._id),F.default.createElement(Yt,{organizations:e,producer:t}))}))):null},t}(F.default.Component),Gt=Ht,Qt=n(394),Xt=n.n(Qt),Ft=function(e){function t(n){q(this,t);var a=K(this,e.call(this,n));return a.state={errors:[],organizationProducers:[]},a}return H(t,e),t.prototype.componentDidMount=function(){return Promise.all([this.updateProducersToAssociate()])},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.updateProducersToAssociate=function(){var e=this.props.organization;return Object(ye.c)(Object(Ee.n)(e._id),this,"organizationProducers")},t.prototype.dissociate=function(e){var t=this,n=this.state.organizationProducers,a=this.props.organization;this.setState({organizationProducers:Je([].concat(n),e)}),Object(Ee.d)(e._id,a._id).then(function(){return t.updateProducersToAssociate()})},t.prototype.associate=function(e){var t=this,n=this.state.organizationProducers,a=this.props.organization;this.setState({organizationProducers:Je([].concat(n),e)}),Object(Ee.a)(e._id,a._id).then(function(){return t.updateProducersToAssociate()})},t.prototype.render=function(){var e=this,t=this.state,n=t.organizationProducers,a=t.errors,r=this.props.organization,o=V(n,r._id),i=J(n),s=Y(n,r._id);return a.length?F.default.createElement(ve,{errors:a}):n.length?F.default.createElement("div",null,F.default.createElement(Ut,{producers:o,action:function(t){return e.dissociate(t)}}),F.default.createElement(Bt,{producers:i,action:function(t){return e.associate(t)}}),F.default.createElement(Gt,{producers:s}),F.default.createElement("div",{className:Xt.a.previousPage},F.default.createElement(Z.Link,{to:"/publication/"+r._id},F.default.createElement("i",{className:"arrow left icon"})," Retour"))):null},t}(F.default.Component),Zt=Ft,$t=function(e){function t(n){G(this,t);var a=Q(this,e.call(this,n)),r=n.match.params.organizationId;return a.state={errors:[],organizationId:r},a}return X(t,e),t.prototype.componentWillMount=function(){return Promise.all([this.updateUser(),this.updateOrganization()])},t.prototype.componentWillUnmount=function(){return Object(ye.a)(this)},t.prototype.updateUser=function(){return Object(ye.c)(Object(Ee.p)(),this,"user")},t.prototype.updateOrganization=function(){return Object(ye.c)(Object(Ee.l)(this.state.organizationId),this,"organization")},t.prototype.render=function(){var e=this.state,t=e.user,n=e.organization,a=e.errors,r=e.organizationId;if(a.length)return F.default.createElement(ve,{errors:a});if(!t)return F.default.createElement(ve,{errors:["Vous devez être authentifié pour accéder à cette page"]});if(!n)return null;var o=t.organizations.find(function(e){return e.id===r});return F.default.createElement(ue,{user:t,organization:o,pageTitle:n.name+" - Producteurs",title:"Producteurs"},F.default.createElement(Zt,{organization:n}))},t}(F.Component),en=$t,tn=function(){return F.default.createElement(Z.Switch,null,F.default.createElement(Z.Route,{exact:!0,path:"/publication",component:ze}),F.default.createElement(Z.Route,{path:"/publication/:organizationId/datasets",component:xt}),F.default.createElement(Z.Route,{path:"/publication/:organizationId/producers",component:en}),F.default.createElement(Z.Route,{path:"/publication/:organizationId",component:pt}))};t.default=tn}});
//# sourceMappingURL=publication.1834dead480dcb8fd265.js.map